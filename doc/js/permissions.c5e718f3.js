(window.webpackJsonp=window.webpackJsonp||[]).push([["permissions"],{"32f6":function(n,s,e){"use strict";e.r(s);var t={name:"Permissions",components:{},mixins:[],props:{msg:{type:String,default:"Permissions"}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},i=(e("ef38"),e("2877")),o=Object(i.a)(t,(function(){var n=this,s=n.$createElement,e=n._self._c||s;return e("div",{staticClass:"permissions"},[e("b-title-tag",{attrs:{name:"按钮权限"}}),e("h4",[n._v("1.登录的时候获取按钮权限，并保存")]),e("code-h",{attrs:{lang:"js",content:"\n  login(params) {\n      this.$store.dispatch('login/login', params)\n        .then((res) => {\n          if (res.code === 0) {\n            sessionStorage.setItem('token', res.data.auth_token)\n            sessionStorage.setItem('user', JSON.stringify(res.data))\n            // 获取用户菜单和按钮的权限\n            this.$store.dispatch('login/permissionTree')\n              .then(response => {\n\n                if (response.data) {\n                  // 把菜单权限存到sessionStorage\n                  sessionStorage.setItem('menuList', JSON.stringify(mapMenuList(response.data)))\n                  // 把按钮权限存到sessionStorage\n                  sessionStorage.setItem('permissions', JSON.stringify(mapPermissonList(response.data)))\n                  // permissions:['/sys/user/add','/sys/user/detele', ...]\n                }\n              })\n            this.$router.push(`/main/dash-board`)\n          } else {\n            this.changeCaptcha()\n          }\n        })\n    },\n    "}}),e("h4",[n._v("2.给需要权限的按钮配置权限")]),e("code-h",{attrs:{lang:"js",content:'\n    // 添加/删除/详情：按钮需要权限。查看：不需要\n    <b-button-group\n      :btnList="[\n        {\n          name: "添加",\n          btnPerm:"/sys/user/add"\n        },\n        {\n          name: "删除",\n          btnPerm:"/sys/user/detele"\n        },\n        {\n          name: "详情",\n          btnPerm:"/sys/user/detail"\n        },\n        {\n          name: "查看",\n          btnPerm:""\n        }\n      ]"\n    >\n    </b-button-group>\n\n    // 编辑：按钮需要权限。收藏：不需要\n    <b-icon-group\n      :iconList="[\n        {\n          name: "编辑",\n          icon: "el-icon-edit",\n          btnPerm:"/sys/user/edit"\n        },\n        {\n          name: "收藏",\n          icon: "el-icon-collect",\n          btnPerm:""\n        },\n      ]"\n    >\n    </b-icon-group>\n  '}})],1)}),[],!1,null,"cb68af28",null);s.default=o.exports},"3a75":function(n,s,e){},ef38:function(n,s,e){"use strict";var t=e("3a75");e.n(t).a}}]);